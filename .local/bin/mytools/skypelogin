#!/bin/bash

xdotool keyup shift
xdotool keyup s
xdotool keyup super

id=$(xwininfo -tree -root | grep '"Skype"' | awk '{print $1}')
username="ottolin@outlook.de"
password="$(gopass show ol/general/microsoft/"$username")"

focus_skype(){
    i3-msg fullscreen disable
    xdotool set_desktop "$(xdotool get_desktop_for_window "$id")"
    xdotool windowfocus "$id"
}


sleep 2
focus_skype
xdotool key --clearmodifiers --window "$id" Return
sleep 2

focus_skype
xdotool type --clearmodifiers --delay 0 "$username"
xdotool key --clearmodifiers --window "$id" Return
sleep 2

focus_skype
xdotool type --clearmodifiers --delay 0 "$password"
xdotool key --clearmodifiers --window "$id" Return
